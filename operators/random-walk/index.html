<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation website for https://github.com/ibm/ado"><meta name=author content="The ado authors"><link href=https://ibm.github.io/ado/operators/random-walk/ rel=canonical><link href=../creating-operators/ rel=prev><link href=../optimisation-with-ray-tune/ rel=next><link rel=icon href=../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>The Random Walk Operator - ado Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="ado Documentation" class="md-header__button md-logo" aria-label="ado Documentation" data-md-component=logo> <img src=../../logo-ibm.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ado Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> The Random Walk Operator </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=blue aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm/ado title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> ibm/ado </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../examples/examples/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../core-concepts/concepts/ class=md-tabs__link> Core Concepts </a> </li> <li class=md-tabs__item> <a href=../../resources/resources/ class=md-tabs__link> Resources </a> </li> <li class=md-tabs__item> <a href=../../actuators/working-with-actuators/ class=md-tabs__link> Actuators </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../working-with-operators/ class=md-tabs__link> Operators </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="ado Documentation" class="md-nav__button md-logo" aria-label="ado Documentation" data-md-component=logo> <img src=../../logo-ibm.png alt=logo> </a> ado Documentation </label> <div class=md-nav__source> <a href=https://github.com/ibm/ado title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> ibm/ado </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/demo/ class=md-nav__link> <span class=md-ellipsis> Demo </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/install/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/ado/ class=md-nav__link> <span class=md-ellipsis> The ado CLI </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/installing-backend-services/ class=md-nav__link> <span class=md-ellipsis> Installing backend services </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/remote_run/ class=md-nav__link> <span class=md-ellipsis> Running ado on remote ray clusters </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/developing/ class=md-nav__link> <span class=md-ellipsis> Developing ado </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../examples/random-walk/ class=md-nav__link> <span class=md-ellipsis> Taking a random walk </span> </a> </li> <li class=md-nav__item> <a href=../../examples/best-configuration-search/ class=md-nav__link> <span class=md-ellipsis> Search a space with an optimizer </span> </a> </li> <li class=md-nav__item> <a href=../../examples/search-custom-objective/ class=md-nav__link> <span class=md-ellipsis> Search based on a custom objective function </span> </a> </li> <li class=md-nav__item> <a href=../../examples/lhu/ class=md-nav__link> <span class=md-ellipsis> Identify the important dimensions of a space </span> </a> </li> <li class=md-nav__item> <a href=../../examples/finetune-locally/ class=md-nav__link> <span class=md-ellipsis> Measure throughput of fine-tuning locally </span> </a> </li> <li class=md-nav__item> <a href=../../examples/finetune-remotely/ class=md-nav__link> <span class=md-ellipsis> Measure throughput of fine-tuning on a remote RayCluster </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../core-concepts/concepts/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/entity-spaces/ class=md-nav__link> <span class=md-ellipsis> Entities and Entity Spaces </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/actuators/ class=md-nav__link> <span class=md-ellipsis> Actuators, Experiments & Measurement Spaces </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/discovery-spaces/ class=md-nav__link> <span class=md-ellipsis> Discovery Spaces </span> </a> </li> <li class=md-nav__item> <a href=../../core-concepts/data-sharing/ class=md-nav__link> <span class=md-ellipsis> Shared Sample Stores </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resources/resources/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../../resources/metastore/ class=md-nav__link> <span class=md-ellipsis> The metastore </span> </a> </li> <li class=md-nav__item> <a href=../../resources/sample-stores/ class=md-nav__link> <span class=md-ellipsis> samplestore </span> </a> </li> <li class=md-nav__item> <a href=../../resources/discovery-spaces/ class=md-nav__link> <span class=md-ellipsis> discoveryspace </span> </a> </li> <li class=md-nav__item> <a href=../../resources/operation/ class=md-nav__link> <span class=md-ellipsis> operation </span> </a> </li> <li class=md-nav__item> <a href=../../resources/actuatorconfig/ class=md-nav__link> <span class=md-ellipsis> actuatorconfiguration </span> </a> </li> <li class=md-nav__item> <a href=../../resources/datacontainer/ class=md-nav__link> <span class=md-ellipsis> datacontainer </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Actuators </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Actuators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../actuators/working-with-actuators/ class=md-nav__link> <span class=md-ellipsis> Actuators overview </span> </a> </li> <li class=md-nav__item> <a href=../../actuators/creating-actuator-classes/ class=md-nav__link> <span class=md-ellipsis> Extending `ado` with new actuators </span> </a> </li> <li class=md-nav__item> <a href=../../actuators/creating-custom-experiments/ class=md-nav__link> <span class=md-ellipsis> Adding custom experiments </span> </a> </li> <li class=md-nav__item> <a href=../../actuators/replay/ class=md-nav__link> <span class=md-ellipsis> Using externally obtained data </span> </a> </li> <li class=md-nav__item> <a href=../../actuators/sft-trainer/ class=md-nav__link> <span class=md-ellipsis> SFTTrainer - measure fine-tuning performance </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Operators </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Operators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../working-with-operators/ class=md-nav__link> <span class=md-ellipsis> Operators overview </span> </a> </li> <li class=md-nav__item> <a href=../explore_operators/ class=md-nav__link> <span class=md-ellipsis> Explore operators </span> </a> </li> <li class=md-nav__item> <a href=../creating-operators/ class=md-nav__link> <span class=md-ellipsis> Extending `ado` with new Operators </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> The Random Walk Operator </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> The Random Walk Operator </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-does-the-randomwalk-operator-do class=md-nav__link> <span class=md-ellipsis> What does the RandomWalk operator do? </span> </a> </li> <li class=md-nav__item> <a href=#when-should-you-use-the-randomwalk-operator class=md-nav__link> <span class=md-ellipsis> When should you use the RandomWalk operator? </span> </a> </li> <li class=md-nav__item> <a href=#what-happens-if-i-apply-multiple-randomwalk-operations-to-a-space class=md-nav__link> <span class=md-ellipsis> What happens if I apply multiple RandomWalk operations to a space? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#controlling-sampling-and-measurements-continuous-batching class=md-nav__link> <span class=md-ellipsis> Controlling sampling and measurements: Continuous batching </span> </a> </li> <li class=md-nav__item> <a href=#configuring-a-randomwalk class=md-nav__link> <span class=md-ellipsis> Configuring a RandomWalk </span> </a> <nav class=md-nav aria-label="Configuring a RandomWalk"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#batch-size-and-concurrent-experiments class=md-nav__link> <span class=md-ellipsis> Batch Size and Concurrent Experiments </span> </a> </li> <li class=md-nav__item> <a href=#base-sampling-types-and-modes class=md-nav__link> <span class=md-ellipsis> Base Sampling Types and Modes </span> </a> <nav class=md-nav aria-label="Base Sampling Types and Modes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sampling-types class=md-nav__link> <span class=md-ellipsis> Sampling Types </span> </a> </li> <li class=md-nav__item> <a href=#sampler-modes class=md-nav__link> <span class=md-ellipsis> Sampler Modes </span> </a> </li> <li class=md-nav__item> <a href=#why-grouped-modes class=md-nav__link> <span class=md-ellipsis> Why Grouped Modes? </span> </a> </li> <li class=md-nav__item> <a href=#enabling-grouping class=md-nav__link> <span class=md-ellipsis> Enabling Grouping </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-samplers class=md-nav__link> <span class=md-ellipsis> Custom Samplers </span> </a> <nav class=md-nav aria-label="Custom Samplers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implementing-a-custom-sampler class=md-nav__link> <span class=md-ellipsis> Implementing a Custom Sampler </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sampling-all-entities class=md-nav__link> <span class=md-ellipsis> Sampling all Entities </span> </a> </li> <li class=md-nav__item> <a href=#filtering-entities class=md-nav__link> <span class=md-ellipsis> Filtering Entities </span> </a> </li> <li class=md-nav__item> <a href=#multiple-measurement class=md-nav__link> <span class=md-ellipsis> Multiple Measurement </span> </a> </li> <li class=md-nav__item> <a href=#retrying-failed-measurements class=md-nav__link> <span class=md-ellipsis> Retrying Failed Measurements </span> </a> <nav class=md-nav aria-label="Retrying Failed Measurements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#experiment-request-index-v-number-of-experiments-requested class=md-nav__link> <span class=md-ellipsis> Experiment request index v number of experiments requested </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#whats-next class=md-nav__link> <span class=md-ellipsis> What's next </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../optimisation-with-ray-tune/ class=md-nav__link> <span class=md-ellipsis> The Ray Tune Operator </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm/ado/edit/main/website/docs/operators/random-walk.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.06 9 .94.94L5.92 19H5v-.92zm3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"/></svg> </a> <h1>The Random Walk Operator</h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <h3 id=what-does-the-randomwalk-operator-do>What does the RandomWalk operator do?<a class=headerlink href=#what-does-the-randomwalk-operator-do title="Permanent link">&para;</a></h3> <p>The RandomWalk operator provides different ways to randomly sample and measure points from a <code>discoveryspace</code>. Despite its name it can also perform deterministic sampling.</p> <p>RandomWalk is an <code>explore</code> type operator.</p> <h3 id=when-should-you-use-the-randomwalk-operator>When should you use the RandomWalk operator?<a class=headerlink href=#when-should-you-use-the-randomwalk-operator title="Permanent link">&para;</a></h3> <p>Use the RandomWalk operator when you want to:</p> <ul> <li>get an unbiased idea of the distribution of property values across entities in the <code>discoveryspace</code></li> <li>sample and measure all the entities in the space in random or sequential order (finite size spaces)</li> <li>sample entities matching particular conditions (see below)</li> </ul> <p>The RandomWalk operator supports <code>memoization</code>: if it samples the same entity twice, and that entity has already had the measurement space applied, it will replay the already measured values (by default).</p> <h3 id=what-happens-if-i-apply-multiple-randomwalk-operations-to-a-space>What happens if I apply multiple RandomWalk operations to a space?<a class=headerlink href=#what-happens-if-i-apply-multiple-randomwalk-operations-to-a-space title="Permanent link">&para;</a></h3> <p>If you apply multiple RandomWalk operations you just get multiple random walks of the different lengths and types you have requested.</p> <p>All explore operations are independent. This means each proceeds as configured - the only influence of previous operations is to enable <code>memoziation</code> if a subsequent operation visits the same point.</p> <p>To concretize this, consider two RandomWalk operations that sample deterministically (i.e. aren't actually random). The first is configured to sample 50 entities, the second 200 entities. At the start no entities have been sampled and measured from a given discovery space.</p> <p>After the first operation:</p> <ul> <li>50 entities will have been sampled and measured from the <code>discoveryspace</code> (assuming no errors) and placed in its <code>samplestore</code></li> <li>The timeseries of this first operation is stored. It has 50 entities in it.</li> </ul> <p>After the second operation:</p> <ul> <li>200 entities will have been sampled and measured from the <code>discoveryspace</code> (assuming no errors) and placed in its <code>samplestore</code></li> <li>150 will have been measured by this operation, with the first 50 being replayed (as they were already measured during the first operation)</li> <li>The timeseries of this second operation is stored. It has 200 entities in it.</li> </ul> <h2 id=controlling-sampling-and-measurements-continuous-batching>Controlling sampling and measurements: Continuous batching<a class=headerlink href=#controlling-sampling-and-measurements-continuous-batching title="Permanent link">&para;</a></h2> <p>When a RandomWalk operation encounters an unmeasured entity in the <code>discoveryspace</code> it applies the experiments defined by its <code>measurementspace</code> Depending on the experiments you may want to control how many concurrent experiments are being executed.</p> <p>RandomWalk uses the concept of continuous batching to set thr number of concurrent <strong>requested</strong> experiments and ensure that, as far as possible, there are always this number of experiments in flight.</p> <p>This approach maximises throughput compared to normal batch-wise submission. In the normal case the time to finish measuring batch of N entities is, at a minimum, the time taken for the longest experiment to complete. This means if one experiment is very long and the others short, there can be capacity in the system for (N-1) additional entities to be measured but it will not be used.</p> <p>The next section explains more about configuring continuous batching</p> <h2 id=configuring-a-randomwalk>Configuring a RandomWalk<a class=headerlink href=#configuring-a-randomwalk title="Permanent link">&para;</a></h2> <p>The parameters for a RandomWalk are (default values shown):</p> <div class=highlight><pre><span></span><code><span class=nt>numberEntities</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w> </span><span class=c1># The maximum number of entities to sample. Can also be the string &quot;all&quot; - see &quot;Sampling all Entities&quot;. </span>
<span class=nt>batchSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w>  </span><span class=c1># The Number of entities in the initial batch. For more on this see &quot;Batch Size and Concurrent Experiments&quot; below</span>
<span class=nt>samplerConfig</span><span class=p>:</span>
<span class=w>  </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">random</span><span class=w> </span><span class=c1># How to sample - can be random, sequential, sequentialgrouped or randomgrouped. sequential requires the sampling supports sequencing entities</span>
<span class=w>  </span><span class=nt>samplerType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">selector</span><span class=w> </span><span class=c1># How to sample entities. Can be selector or generator. For more see Sampling Types and Modes below</span>
<span class=w>  </span><span class=nt>grouping</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[]</span><span class=w> </span><span class=c1># If the mode sequentialgrouped or randomgrouped this is a list of constitutive properties identifiers to group the entities by</span>
<span class=nt>singleMeasurement</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w> </span><span class=c1># If true memoization is used. If false already measured entities will be re-measured. For more see Multiple Measurement below</span>
<span class=nt>maxRetries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class=w> </span><span class=c1># The number of times to retry a failed measurement on an entity. See Retrying Failed Measurements below.</span>
<span class=nt>filter</span><span class=p>:</span>
<span class=w>  </span><span class=nt>filterMode</span><span class=p>:</span>
<span class=w>    </span><span class="l l-Scalar l-Scalar-Plain">nofilter</span><span class=w> </span><span class=c1># Sets filters on the entities in the space that should be sampled. Entities not matching the filter will not be sampled or measured.</span>
<span class=w>    </span><span class=c1># See &quot;Filtering Entities&quot; below for more details</span>
</code></pre></div> <p>An example <code>operation</code> YAML with a sequential selector:</p> <div class=highlight><pre><span></span><code><span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Example</span><span class=nv> </span><span class=s>random</span><span class=nv> </span><span class=s>walk</span><span class=nv> </span><span class=s>operation&quot;</span>
<span class=nt>operation</span><span class=p>:</span>
<span class=w>  </span><span class=nt>module</span><span class=p>:</span>
<span class=w>    </span><span class=nt>operatorName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">random_walk</span>
<span class=w>    </span><span class=nt>operatorType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">explore</span>
<span class=w>  </span><span class=nt>parameters</span><span class=p>:</span>
<span class=w>    </span><span class=nt>batchSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>    </span><span class=nt>samplerConfig</span><span class=p>:</span>
<span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">random</span>
<span class=w>      </span><span class=nt>samplerType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">selector</span>
<span class=w>    </span><span class=nt>numberEntities</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>    </span><span class=nt>singleMeasurement</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>    </span><span class=nt>filter</span><span class=p>:</span>
<span class=w>      </span><span class=nt>filterMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unmeasured</span>
<span class=nt>spaces</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your-spaces</span>
</code></pre></div> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>You can get a default RandomWalk operation template and the schema of its parameters by running <code>ado template operation --operator-name random_walk --include-schema</code> The information output by this command should always be preferred over the information presented here if there is an inconsistency.</p> </div> <h3 id=batch-size-and-concurrent-experiments>Batch Size and Concurrent Experiments<a class=headerlink href=#batch-size-and-concurrent-experiments title="Permanent link">&para;</a></h3> <p>When it comes to managing resources during an exploration, the key variable one wants to control is the number of concurrent experiments.</p> <p>For the RandomWalk operator this number is its <code>batchSize</code> parameter (the number of initial entities submitted) multiplied by the number of experiments in the <code>measurementspace</code> of the <code>discoveryspace</code> it is operating on. For example, if the <code>batchSize</code> is 2 and there are 2 experiments defined in the <code>measurementspace</code> there will be 4 (2*2) experiments requested. Each experiment will be measuring one entity. The continuous batching will endeavour to keep this many concurrent experiment requests during the operation.</p> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>The RandomWalk operator only know how many experiments it has requested, not how many are actually executing. Hence continuous batching can only maintain that there are N experiments requested at any time.</p> </div> <h3 id=base-sampling-types-and-modes>Base Sampling Types and Modes<a class=headerlink href=#base-sampling-types-and-modes title="Permanent link">&para;</a></h3> <p>The <code>samplerConfig</code> field controls how Entities are sampled during the operation. The base <code>samplerConfig</code> is shown in the examples above and has the following fields and defaults:</p> <div class=highlight><pre><span></span><code><span class=w> </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">random</span><span class=w> </span>
<span class=w> </span><span class=nt>samplerType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">selector</span><span class=w> </span>
<span class=w> </span><span class=nt>grouping</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[]</span><span class=w> </span>
</code></pre></div> <h4 id=sampling-types>Sampling Types<a class=headerlink href=#sampling-types title="Permanent link">&para;</a></h4> <p>There are two sampling types: <code>generator</code> and <code>selector</code>.</p> <p>The <code>generator</code> sampling type <em>generates</em> valid entities based on the <code>entityspace</code> definition. It currently only works with entities space that have a finite size i.e. all constitutive properties are DISCRETE or CATEGORICAL and are bounded.</p> <p>The <code>selector</code> sampling type draws <em>existing matching entities</em> from the <code>samplestore</code> of the <code>discoveryspace</code> i.e. it doesn't use the entity space.</p> <h4 id=sampler-modes>Sampler Modes<a class=headerlink href=#sampler-modes title="Permanent link">&para;</a></h4> <p>Both sampling types support four modes, which can be categorised as flat or grouped :</p> <ul> <li>flat</li> <li>sequential</li> <li>random</li> <li>grouped</li> <li>sequentialgrouped</li> <li>randomgrouped.</li> </ul> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>The flat modes sample entities directly. For the grouped modes, the sampling is done on 2 levels - groups and then entities in the groups. The group level sampling can be either sequential or random, while group member level is always sequential</p> </div> <p>The details of how each mode works can differ slightly depending on if a sampler is <code>generator</code> or <code>selector</code>.</p> <ul> <li><code>sequential</code></li> <li><code>generator</code>: The entities are generated by iterating over the constitutive properties values with the first property being innermost and last outermost (see below for more details).</li> <li><code>selector</code>: The entities are iterated in the order they are returned by the <code>samplestore</code></li> <li><code>random</code></li> <li>For both samplers the entities are sampled in a random order.</li> <li><code>sequentialgrouped</code></li> <li>The entities are grouped by a user defined condition. Either all the entities in space (<code>generator</code>) or the entities in the <code>samplestore</code> (<code>selector</code>)<ul> <li>The groups are iterated in order</li> <li>The group members are iterated in order</li> </ul> </li> <li><code>randomgrouped</code></li> <li>The entities are grouped in the same way as <code>sequentialgrouped</code><ul> <li>The groups are iterated randomly</li> <li>The group members are iterated in order</li> </ul> </li> </ul> <p>In pseudocode, sequential mode iterates as follows if there are N constitutive properties</p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>propertyN</span><span class=o>.</span><span class=n>values</span><span class=p>:</span>
  <span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=n>propertyN_1</span><span class=o>.</span><span class=n>values</span><span class=p>:</span>
     <span class=o>...</span>
     <span class=k>for</span> <span class=n>z</span> <span class=ow>in</span> <span class=n>property1</span><span class=o>.</span><span class=n>values</span><span class=p>:</span>
         <span class=n>entity</span><span class=p>({</span><span class=s1>&#39;propertyN&#39;</span><span class=p>:</span><span class=n>x</span><span class=p>,</span> <span class=s1>&#39;propertyN_1&#39;</span><span class=p>:</span><span class=n>y</span><span class=p>,</span> <span class=o>...</span><span class=p>,</span> <span class=s1>&#39;property1&#39;</span><span class=p>:</span><span class=n>z</span><span class=p>})</span>
</code></pre></div> <h4 id=why-grouped-modes>Why Grouped Modes?<a class=headerlink href=#why-grouped-modes title="Permanent link">&para;</a></h4> <p>The advantage of the group modes is that they can allow <a href=../../actuators/working-with-actuators/ >actuators</a> to reuse their test environments, providing faster measurements. For example, consider an actuator that needs to create different test environments for different groups of entities. This creation may incur a significant overhead or there may be a limited on the number of simultaneous environments that can be created. In this case the measurements would be most efficient if all entities in a group are submitted to the actuator in sequence, as the actuator can create a test environment once and then reuse it for all group members. This is what grouping allows.</p> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>See the docs of the specific actuator you are using to see if and how it can benefit from grouping.</p> </div> <h4 id=enabling-grouping>Enabling Grouping<a class=headerlink href=#enabling-grouping title="Permanent link">&para;</a></h4> <p>To use the grouped modes (<code>randomgrouped</code>, <code>sequentialgrouped</code>) you need to supply a list of constitutive properties to group by using the <code>grouping</code> parameter. Here is an example configuration for using a <code>generator</code> sampler with <code>sequentialgrouped</code> mode:</p> <div class=highlight><pre><span></span><code><span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Example</span><span class=nv> </span><span class=s>grouped</span><span class=nv> </span><span class=s>random</span><span class=nv> </span><span class=s>walk</span><span class=nv> </span><span class=s>operation&quot;</span>
<span class=nt>operation</span><span class=p>:</span>
<span class=w>  </span><span class=nt>module</span><span class=p>:</span>
<span class=w>    </span><span class=nt>operatorName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">random_walk</span>
<span class=w>    </span><span class=nt>operatorType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">explore</span>
<span class=w>  </span><span class=nt>parameters</span><span class=p>:</span>
<span class=w>    </span><span class=nt>batchSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>    </span><span class=nt>samplerConfig</span><span class=p>:</span>
<span class=w>      </span><span class=nt>samplerType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">generator</span>
<span class=w>      </span><span class=nt>grouping</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$CONSTITUTIVE_PROPERTY_ONE</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$CONSTITUTIVE_PROPERTY_TWO</span>
<span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sequentialgrouped</span>
<span class=w>    </span><span class=nt>numberEntities</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class=w>    </span><span class=nt>singleMeasurement</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>    </span><span class=nt>filter</span><span class=p>:</span>
<span class=w>      </span><span class=nt>filterMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unmeasured</span>
<span class=nt>spaces</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your-spaces</span>
</code></pre></div> <h3 id=custom-samplers>Custom Samplers<a class=headerlink href=#custom-samplers title="Permanent link">&para;</a></h3> <p>It is also possible to specify that <code>random_walk</code> uses a custom sampler. This is a class that inherits from <code>orchestrator.core.discovery.samplers.BaseSampler</code>. This is useful for implementing more complex sampling schemes. For example, for developers who want to use random_walk to drive an exploration but have custom logic to execute before choosing each sample/entity.</p> <p>For custom samplers the <code>samplerConfig</code> field has the following structure:</p> <div class=highlight><pre><span></span><code><span class=nt>module</span><span class=p>:</span>
<span class=w>  </span><span class=nt>moduleClass</span><span class=p>:</span><span class=w> </span><span class=c1>#The name of the custom sampler class</span>
<span class=w>  </span><span class=nt>moduleName</span><span class=p>:</span><span class=w> </span><span class=c1>#The name of the python module containing the sampler</span>
<span class=nt>parameters</span><span class=p>:</span><span class=w> </span><span class=c1># A dictionary of key value pairs with the values for the custom samplers input parameters </span>
<span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div> <h4 id=implementing-a-custom-sampler>Implementing a Custom Sampler<a class=headerlink href=#implementing-a-custom-sampler title="Permanent link">&para;</a></h4> <p>To implement a custom sampler create a sub-class of <code>orchestrator.core.discovery.samplers.BaseSampler</code> and implement all required methods</p> <p>The <code>BaseSampler</code> class does not specify any <code>__init__</code> parameters. If your custom class requires initialization parameters then</p> <ul> <li>define a pydantic model for them</li> <li>override the <code>parameters_model</code> class method to return this model</li> <li>add a non key-word parameter to your custom classes <code>__init__</code> that is this type.</li> </ul> <p>For example:</p> <div class=highlight><pre><span></span><code><span class=c1># Class for the custom samplers parameters</span>
<span class=k>class</span><span class=w> </span><span class=nc>MySamplerParams</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span> 
   <span class=o>...</span>

<span class=c1># Subclass of BaseSampler implementing the custom sampling logic</span>
<span class=k>class</span><span class=w> </span><span class=nc>MySampler</span><span class=p>(</span><span class=n>BaseSampler</span><span class=p>):</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>parameters_model</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Type</span><span class=p>[</span><span class=n>BaseModel</span><span class=p>]]:</span>
        
        <span class=c1># Return the custom samplers parameters model</span>
        <span class=k>return</span> <span class=n>MySamplerParams</span>
    
    <span class=c1># Add an init arg to take the parameters model</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parameters</span><span class=p>:</span> <span class=n>MySamplerParams</span><span class=p>):</span>
         <span class=o>...</span>
</code></pre></div> <h3 id=sampling-all-entities>Sampling all Entities<a class=headerlink href=#sampling-all-entities title="Permanent link">&para;</a></h3> <p>If either of the following conditions are true you can specify a value of "all" for the <code>numberOfEntities</code> field in the random walk configuration:</p> <ul> <li>All dimensions in the <code>entityspace</code>s are discrete and bounded or categorical</li> <li>The sampling type is <code>selector</code> i.e. you are iterating over an existing set number of entities in a <code>samplestore</code></li> </ul> <p>In the first case <code>all</code> will be converted to the size of the space. In the second case <code>all</code> will be converted to the number of matching entities in the <code>samplestore</code>.</p> <p>If both of these conditions is False the RandomWalk operator will raise a ValueError when the execution starts.</p> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>Depending on the Filter settings a randomwalk operation may not sample "all" entities even if "all" is specified. This is because the filter may filter out some entities.</p> </div> <div class="admonition warning end"> <p class=admonition-title>Warning</p> <p>For <code>discoveryspaces</code> where one/both of the above conditions are True setting <code>numberOfEntities</code> greater than the corresponding size (size of space, or number of matching entities in <code>samplestore</code>) will raise a ValueError. This means you cannot set <code>numberOfEntities</code> to an arbitrarily large number to ensure sampling all of them - use <code>all</code> instead.</p> </div> <h3 id=filtering-entities>Filtering Entities<a class=headerlink href=#filtering-entities title="Permanent link">&para;</a></h3> <p>In some circumstance you may want to only sample a subset of Entities. Some examples include</p> <ul> <li>You want to skip replaying entities already measured as there are many and just sample the unmeasured ones</li> <li>You might want to complete measurement of partially measured entities but not want to start measuring unmeasured ones - for example for testing a cost-function</li> <li>You might want to add additional measurements to all entities already fully measured but not want to add measurements to any other measurements.</li> </ul> <p>The <code>filter</code> field provides this capability. It has one sub-field <code>filterMode</code> which can take the following values:</p> <ul> <li><code>noFilter</code>: The default value. No filtering is applied</li> <li><code>unmeasured</code>: Only Entities with no measurements by any of the experiments in the <code>measurementspace</code> will be sampled</li> <li><code>partial</code>: Only Entities with measured by at least one and less than all the experiments in the <code>measurementspace</code> will be sampled</li> <li><code>measured</code>: Only Entities fully measured by the experiments in the <code>measurementspace</code> will be sampled</li> </ul> <h3 id=multiple-measurement>Multiple Measurement<a class=headerlink href=#multiple-measurement title="Permanent link">&para;</a></h3> <p>By setting <code>singleMeasurement:</code> to False the random walk operation will measure ALL entities it samples, even if they already have measurements.</p> <p>If entities have multiple measurements e.g. you turned this off and then turned it on again, then if an entity has multiple measurements each one will be replayed.</p> <p>Check <a href=../explore_operators/#replayed-measurements>replayed measurements</a> for more details.</p> <h3 id=retrying-failed-measurements>Retrying Failed Measurements<a class=headerlink href=#retrying-failed-measurements title="Permanent link">&para;</a></h3> <p>If the measurement of an entity by an experiment fails RandomWalk can retry it. The parameter controlling this is <code>maxRetries</code> which by default is 0 - no retries. If <code>maxRetries</code> is N then failing measurements will be retried up to <code>N</code> times.</p> <h4 id=experiment-request-index-v-number-of-experiments-requested>Experiment request index v number of experiments requested<a class=headerlink href=#experiment-request-index-v-number-of-experiments-requested title="Permanent link">&para;</a></h4> <p>To understand a RandomWalk operations logs when maxRetries is greater than 0 its necessary to understand how it tracks the entity+experiment combinations it wants to measure versus the number of experiments it has requested to do these measurements.</p> <p>RandomWalk assigns an integer to each entity+experiment combination it wants to measure. This is called the request index - the Nth entity+experiment combination will have request index N-1.</p> <p>RandomWalk tracks retries based on request index. For example, it tracks that request index 5 has been retried 2 times.</p> <div class="admonition info end"> <p class=admonition-title>Info</p> <p>At the end of an RandomWalk operation, a summary of each request index that was retried is output. This includes how many times it was retried and what the final status was - either it performed maxRetries and still was FAILED or one of the retries indicated SUCCESS</p> <p>Example summary output. Here <code>Request 8</code> means request index 8.</p> <p> <div class=highlight><pre><span></span><code>Summary of 2 retried experiments
Request 0: Request d39947. Entity: fuchsia-raft (mock-sample-store-31799c). Experiment: mock.test-experiment. Retried: 2 times. Final status: Success
Request 8: Request f11853. Entity: flush-oasis (mock-sample-store-31799c). Experiment: mock.test-experiment. Retried: 1 times. Final status: Success
</code></pre></div> </p> </div> <div class="admonition important end"> <p class=admonition-title>Important</p> <p>When retrying is enabled, the highest request index is not equal to the number of experiments submitted. For example there may be 40 entity+experiment combinations tested, meaning greatest requestIndex is 39, but 50 experiments requested due to failures and retries.</p> <p>This also means that when retrying is enabled the experimentRequested metadata recorded with each RandomWalk operation is not equal to (number entities sampled) x (number of experiments in measurement space)</p> </div> <h2 id=whats-next>What's next<a class=headerlink href=#whats-next title="Permanent link">&para;</a></h2> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M1 3a2 2 0 0 1 2-2h6.5a2 2 0 0 1 2 2v6.5a2 2 0 0 1-2 2H7v4.063C7 16.355 7.644 17 8.438 17H12.5v-2.5a2 2 0 0 1 2-2H21a2 2 0 0 1 2 2V21a2 2 0 0 1-2 2h-6.5a2 2 0 0 1-2-2v-2.5H8.437A2.94 2.94 0 0 1 5.5 15.562V11.5H3a2 2 0 0 1-2-2Zm2-.5a.5.5 0 0 0-.5.5v6.5a.5.5 0 0 0 .5.5h6.5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5ZM14.5 14a.5.5 0 0 0-.5.5V21a.5.5 0 0 0 .5.5H21a.5.5 0 0 0 .5-.5v-6.5a.5.5 0 0 0-.5-.5Z"/></svg></span> <strong>Try our Random Walk Example</strong></p> <hr> <p>Try using the RandomWalk operator with our <a href=../../examples/random-walk/ >example</a>.</p> <p><a href=../../examples/random-walk/ >Random Walk example <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"/></svg></span></a></p> </li> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.322.75h1.176a1.75 1.75 0 0 1 1.75 1.749v1.177a10.75 10.75 0 0 1-2.925 7.374l-1.228 1.304a24 24 0 0 1-1.596 1.542v5.038c0 .615-.323 1.184-.85 1.5l-4.514 2.709a.75.75 0 0 1-1.12-.488l-.963-4.572a1.3 1.3 0 0 1-.14-.129L8.04 15.96l-1.994-1.873a1.3 1.3 0 0 1-.129-.14l-4.571-.963a.75.75 0 0 1-.49-1.12l2.71-4.514c.316-.527.885-.85 1.5-.85h5.037a24 24 0 0 1 1.542-1.594l1.304-1.23A10.75 10.75 0 0 1 20.321.75Zm-6.344 4.018v-.001l-1.304 1.23a22.3 22.3 0 0 0-3.255 3.851l-2.193 3.29 1.859 1.744.034.034 1.743 1.858 3.288-2.192a22.3 22.3 0 0 0 3.854-3.257l1.228-1.303a9.25 9.25 0 0 0 2.517-6.346V2.5a.25.25 0 0 0-.25-.25h-1.177a9.25 9.25 0 0 0-6.344 2.518M6.5 21c-1.209 1.209-3.901 1.445-4.743 1.49a.24.24 0 0 1-.18-.067.24.24 0 0 1-.067-.18c.045-.842.281-3.534 1.49-4.743.9-.9 2.6-.9 3.5 0s.9 2.6 0 3.5m-.592-8.588L8.17 9.017q.346-.519.717-1.017H5.066a.25.25 0 0 0-.214.121l-2.167 3.612ZM16 15.112q-.5.372-1.018.718l-3.393 2.262.678 3.223 3.612-2.167a.25.25 0 0 0 .121-.214ZM17.5 8a1.5 1.5 0 1 1-3.001-.001A1.5 1.5 0 0 1 17.5 8"/></svg></span> <strong>Create new Operators</strong></p> <hr> <p>Learn about extending ado with new <a href=../working-with-operators/ >Operators</a>.</p> <p><a href=../../actuators/working-with-actuators/ >Creating new Operators <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"/></svg></span></a></p> </li> </ul> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../creating-operators/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Extending `ado` with new Operators"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Extending `ado` with new Operators </div> </div> </a> <a href=../optimisation-with-ray-tune/ class="md-footer__link md-footer__link--next" aria-label="Next: The Ray Tune Operator"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> The Ray Tune Operator </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright IBM Research. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ibm/ado target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.ibm.com/ target=_blank rel=noopener title=www.ibm.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.action.edit", "content.action.feedback", "content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.footer", "navigation.expand", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.92b07e13.min.js></script> </body> </html>